<!doctype html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
		<title>crazy ball</title>
		<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.6.4/jquery.min.js"></script>
		<style>
			body {
				position: relative;
				width: 900px;
				margin: 0 auto;
				background-color: #efefef;
			}

			html,* {
				padding: 0;
				margin: 0;
			}

			.ball {
				/*left:-25px;*/
				position: absolute;
				height: 50px;
				width: 50px;
				border-radius: 50%;
				background-color: #ccc;
			}
			.yellow {
				top: 0;
				background: radial-gradient(circle at 12.5px 12.5px, yellow, #000);
			}

			.green { /* #03f6fb */
				top: 450px;
				background: radial-gradient(circle at 12.5px 12.5px, green, #000);
			}
			.wrap {
				width: 100%;
				height: 500px;
				background-color: white;
				position: relative;
				top: 50px;
			}

		</style>
	</head>
	<body>

		

		<div class="wrap" id="wrap">
			<div class="ball yellow" id="ball"></div>
			<!-- <div class="ball green" id="ball1"></div> -->
		</div>


		<script type="text/javascript">
			;(function(){
				var ball = $('#ball')
				var ms = 450;
				var a = 10;
				var t = 0;
				var delay = 40;
				var s = 0;

				var direction = true;

				var interval = setInterval(function() {

					if(s === ms){
						direction = false
					}
					if(s === 0 ){
						direction = true;
					}
					if(direction){
						t += delay;
					}else{
						t -= delay;
					}

					t = t<0?0:t

					s = a * Math.pow(t/1000, 2)/2;

					s = s > ms ? ms : s;

					ball.css({top: s });	
				}, 5);

				//clearInterval(interval);
			})();
		</script>
		<script>

			var coord = function(target, maxX, maxY) {
				this.target = target;
				this.maxX = maxX - this.target.outerWidth();
				this.maxY = maxY - this.target.outerHeight();
			};

			coord.prototype = {
				rule(x, y) {
					var position = this.calculate(x, y);

					this.target.css(position);
					return this;
				},

				calculate(x, y) {
					var left = this.min(this.maxX, x);
					var top = this.min(this.maxY, y);

					if(left === this.maxX || top === this.maxY){
						position = this.fixPos(x, y);

						if(left === this.maxX) {
							top = position.y;
						}

						if(top === this.maxY) {
							left = position.x;
						}
					}

					return {left};
				},

				fixPos(x, y) {
					this.cacheX = this.cacheX || x;
					this.cacheY = this.cacheY || y;

					return {x: this.cacheX, y: this.cacheY};
				},

				min() {
					return Math.min.apply(Math, arguments);
				}
			};

			var target = $('#ball');
			var wrap = $('#wrap');
			var maxX = wrap.outerWidth();
			var maxY = wrap.outerHeight();

			var trace = new coord(target, maxX, maxY);

			// s = v0t + at^2/2
			//trace.set(30, 50);


			var t = 0;

			setInterval(function() {
				t+= 3/4;

				trace.rule(t, 1/10000*Math.pow(t, 2));

			}, 1);

		</script>
	</body>
</html>
